<section data-ng-controller="PropertiesController" data-ng-init="findOne();initOnCreate();">

    <div class="row">
        <div class="col-md-12">
            <h1>Register New Property</h1>

            <accordion close-others="oneAtATime">
                <accordion-group is-open="status.open">
                    <accordion-heading>
                        Vendor : <b><span ng-bind="property.vendor.title"/> <span ng-bind="property.vendor.firstName"/> <span ng-bind="property.vendor.lastName"/></b>
                        <i class="pull-right glyphicon"
                           ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
                    </accordion-heading>
                    <customer-brief-details customer="property.vendor">
                    </customer-brief-details>
                </accordion-group>
            </accordion>

            <form name="regPropertyForm" data-ng-submit="update()" novalidate>
                <fieldset>
                    <div class="well">
                        <h2>Property Address</h2>
                        <div class="well">
                            <h4>
                                Address Lookup
                            </h4>
                            <h4>
                                <input type="checkbox" ng-change="ChkRegAddressChanged()" ng-model="chkRegAddress"
                                       ng-true-value="1" ng-false-value="0"> same as registered.
                            </h4>
                            <label>Lookup Address: Start by searching street name</label>
                            <google-places address=address ng-model="address.FormattedAddress"
                                           my-find-finish-callback="CallBackFinishSearch('new')"
                                           class="form-control input-lg" placeholder="Find Address"
                                           value="Find Address">\
                            </google-places>
                        </div>
                        <div class="well">
                            <h2>Address Details</h2>

                            <div class="form-group required"
                                 ng-class="{ 'has-error': regPropertyForm.addressLine1.$dirty && regPropertyForm.addressLine1.$invalid }">
                                <label class="control-label" for="addressLine1">Address Line1</label>

                                <div class="controls">
                                    <input name="addressLine1" type="text" data-ng-model="property.addressLine1"
                                           id="addressLine1"
                                           class="form-control input-lg" placeholder="Address Line1" required>
                                    <p ng-show="regPropertyForm.addressLine1.$invalid && !regPropertyForm.addressLine1.$pristine" class="help-block">Your address line 1 is required.</p>
                                </div>
                            </div>
                            <div class="form-group required"
                                 ng-class="{ 'has-error': regPropertyForm.addressLine2.$dirty && regPropertyForm.addressLine2.$invalid }">
                                <label class="control-label" for="addressLine2">Address Line2</label>

                                <div class="controls">
                                    <input name="addressLine2" type="text" data-ng-model="property.addressLine2"
                                           id="addressLine2"
                                           class="form-control input-lg" placeholder="Address Line2" required>
                                    <p ng-show="regPropertyForm.addressLine2.$invalid && !regPropertyForm.addressLine2.$pristine" class="help-block">Your address line 2 is required.</p>
                                </div>
                            </div>
                            <div class="form-group required"
                                 ng-class="{ 'has-error': regPropertyForm.addressLine3.$dirty && regPropertyForm.addressLine3.$invalid }">
                                <label class="control-label" for="addressLine3">Address Line3</label>

                                <div class="controls">
                                    <input name="addressLine3" type="text" data-ng-model="property.addressLine3"
                                           id="addressLine3"
                                           class="form-control input-lg" placeholder="Address Line3" required>
                                    <p ng-show="regPropertyForm.addressLine3.$invalid && !regPropertyForm.addressLine3.$pristine" class="help-block">Your address line 3 is required.</p>
                                </div>
                            </div>
                            <div class="form-group required"
                                 ng-class="{ 'has-error': regPropertyForm.addressLine4.$dirty && regPropertyForm.addressLine4.$invalid }">
                                <label class="control-label" for="addressLine4">Address Line4</label>

                                <div class="controls">
                                    <input name="addressLine4" type="text" data-ng-model="property.addressLine4"
                                           id="addressLine4"
                                           class="form-control input-lg" placeholder="Address Line4" required>
                                    <p ng-show="regPropertyForm.addressLine4.$invalid && !regPropertyForm.addressLine4.$pristine" class="help-block">Your address line 4 is required.</p>
                                </div>
                            </div>
                            <div class="form-group required"
                                 ng-class="{ 'has-error': regPropertyForm.postcode.$dirty && regPropertyForm.postcode.$invalid }">
                                <label class="control-label" for="postcode">Zip/Postcode</label>

                                <div class="controls">
                                    <input name="postcode" type="text" data-ng-model="property.postcode" id="postcode"
                                           class="form-control input-lg" placeholder="Zip/Postcode" required>
                                    <p ng-show="regPropertyForm.postcode.$invalid && !regPropertyForm.postcode.$pristine" class="help-block">Your postcode is required.</p>
                                </div>
                            </div>
                            <div class="form-group required"
                                 ng-class="{ 'has-error': regPropertyForm.country.$dirty && regPropertyForm.country.$invalid }">
                                <label class="control-label" for="country">Zip/Country</label>
                                <div class="controls">
                                    <input name="country" type="text" data-ng-model="property.country" id="country"
                                           class="form-control input-lg" placeholder="Country" required>
                                    <p ng-show="regPropertyForm.country.$invalid && !regPropertyForm.country.$pristine" class="help-block">Your country is required.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="well">
                        <h2>Price Details</h2>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.priceAsking.$dirty && regPropertyForm.priceAsking.$invalid }">
                                    <label class="control-label" for="priceAsking">Asking Price</label>

                                    <div class="controls">
                                        <input name="priceAsking" type="string" data-ng-model="property.priceAsking" ui-money-mask
                                               id="priceAsking"
                                               class="form-control input-lg" placeholder="Asking Price" required>
                                        <p ng-show="regPropertyForm.priceAsking.$invalid && !regPropertyForm.priceAsking.$pristine" class="help-block">Your asking price is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.priceType.$dirty && regPropertyForm.priceType.$invalid }">
                                    <label class="control-label" for="priceType">Price Type</label>

                                    <div class="controls">
                                        <select name="priceType" class="form-control input-lg" id="priceType"
                                                ng-model="property.priceType" ng-options="priceType.value as priceType.name for priceType in priceTypes track by priceType.value">
                                        </select>
                                        {{property.priceType}}
                                        <p ng-show="regPropertyForm.priceType.$error.required" class="help-block">Your price type is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.chainType.$dirty && regPropertyForm.chainType.$invalid }">
                                    <label class="control-label" for="chainType">Chain Situation</label>

                                    <div class="controls">
                                        <select name="chainType" class="form-control input-lg" id="chainType"
                                                ng-model="property.chainType" ng-options="itemType.value as itemType.name for itemType in chainTypes">
                                        </select>
                                        <p ng-show="regPropertyForm.chainType.$error.required" class="help-block">Your chain type is required.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="well">
                        <h2>Property Details</h2>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.propertyType.$dirty && regPropertyForm.propertyType.$invalid }">
                                    <label class="control-label" for="propertyType">Property Type</label>

                                    <div class="controls">
                                        <select name="propertyType" class="form-control input-lg" id="propertyType"
                                                ng-model="property.propertyType" ng-options="itemType.value as itemType.name for itemType in propertyTypes">
                                        </select>
                                        <p ng-show="regPropertyForm.propertyType.$error.required" class="help-block">Your property type is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.tenureType.$dirty && regPropertyForm.tenureType.$invalid }">
                                    <label class="control-label" for="tenureType">Tenure</label>

                                    <div class="controls">
                                        <select name="tenureType" class="form-control input-lg" id="tenureType"
                                                ng-model="property.tenureType"  ng-options="itemType.value as itemType.name for itemType in tenureTypes">
                                        </select>
                                        <p ng-show="regPropertyForm.tenureType.$error.required" class="help-block">Your tenure type is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.propertyAgeYrs.$dirty && regPropertyForm.propertyAgeYrs.$invalid }">
                                    <label class="control-label" for="propertyAgeYrs">Property Age In Years</label>

                                    <div class="controls">
                                        <input name="propertyAgeYrs" type="text" data-ng-model="property.propertyAgeYrs"
                                               id="propertyAgeYrs" ui-number-mask="0"
                                               class="form-control input-lg" placeholder="Property Age In Years"
                                               required>
                                        <p ng-show="regPropertyForm.propertyAgeYrs.$invalid && !regPropertyForm.propertyAgeYrs.$pristine" class="help-block">Your property age is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.numberOfBeds.$dirty && regPropertyForm.numberOfBeds.$invalid }">
                                    <label class="control-label" for="numberOfBeds">No. of Beds</label>

                                    <div class="controls">
                                        <input name="numberOfBeds" type="text" data-ng-model="property.numberOfBeds"
                                               id="numberOfBeds" ui-number-mask="0"
                                               class="form-control input-lg" placeholder="No. of Beds" required>
                                        <p ng-show="regPropertyForm.numberOfBeds.$invalid && !regPropertyForm.numberOfBeds.$pristine" class="help-block">Your number of beds is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.numberOfReceptions.$dirty && regPropertyForm.numberOfReceptions.$invalid }">
                                    <label class="control-label" for="numberOfReceptions">No. of Receptions</label>

                                    <div class="controls">
                                        <input name="numberOfReceptions" type="text" data-ng-model="property.numberOfReceptions"
                                               id="numberOfReceptions"  ui-number-mask="0"
                                               class="form-control input-lg" placeholder="No. of Reception" required>
                                        <p ng-show="regPropertyForm.numberOfReceptions.$invalid && !regPropertyForm.numberOfReceptions.$pristine" class="help-block">Your number of receptions is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.numberOfBathrooms.$dirty && regPropertyForm.numberOfBathrooms.$invalid }">
                                    <label class="control-label" for="numberOfBathrooms">No. of Bathrooms</label>

                                    <div class="controls">
                                        <input name="numberOfBathrooms" type="text" data-ng-model="property.numberOfBathrooms"
                                               id="numberOfBathrooms"  ui-number-mask="0"
                                               class="form-control input-lg" placeholder="No. of Bathrooms" required>
                                        <p ng-show="regPropertyForm.numberOfBathrooms.$invalid && !regPropertyForm.numberOfBathrooms.$pristine" class="help-block">Your number of bathrooms is required.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="well">
                        <h2>Council Tax Details</h2>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.councilTaxBand.$dirty && regPropertyForm.councilTaxBand.$invalid }">
                                    <label class="control-label" for="councilTaxBand">Council Tax Band</label>

                                    <div class="controls">
                                        <input name="councilTaxBand" type="text" data-ng-model="property.councilTaxBand"
                                               id="councilTaxBand"
                                               class="form-control input-lg" placeholder="Council Tax Band" required>
                                        <p ng-show="regPropertyForm.councilTaxBand.$invalid && !regPropertyForm.councilTaxBand.$pristine" class="help-block">Your council tax band is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.councilTaxCost.$dirty && regPropertyForm.councilTaxCost.$invalid }">
                                    <label class="control-label" for="councilTaxCost">Council Tax Cost</label>

                                    <div class="controls">
                                        <input name="councilTaxCost" type="text" data-ng-model="property.councilTaxCost"
                                               id="councilTaxCost" ui-money-mask
                                               class="form-control input-lg" placeholder="Council Tax Cost" required>
                                        <p ng-show="regPropertyForm.councilTaxCost.$invalid && !regPropertyForm.councilTaxCost.$pristine" class="help-block">Your council tax cost is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.councilTaxCostTerm.$dirty && regPropertyForm.councilTaxCostTerm.$invalid }">
                                    <label class="control-label">Council Tax Term</label>

                                    <div class="controls">
                                        <select name="councilTaxCostTerm" class="form-control input-lg"
                                                id="councilTaxCostTerm" ng-model="property.councilTaxCostTerm" ng-model="councilTaxCostTerm" ng-options="itemType.value as itemType.name for itemType in councilTaxTypes">
                                        </select>
                                        <p ng-show="regPropertyForm.councilTaxCostTerm.$error.required" class="help-block">Your council tax term is required.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="well">
                        <h2>Details</h2>

                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.keyFeatures.$dirty && regPropertyForm.keyFeatures.$invalid }">
                                    <label class="control-label" for="keyFeatures">Key Features</label>

                                    <div class="controls">
								<textarea name="keyFeatures" type="text" data-ng-model="property.keyFeatures" id="keyFeatures"
                                          class="form-control input-lg" required/>
                                        <em>Please enter at least 3 key features separated by a comma ','.</em>
                                        <p ng-show="regPropertyForm.keyFeatures.$error.required" class="help-block">Your key features is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="form-group required">
                                    <label class="control-label">Details</label>
                                    <div class="controls">
                                        <text-angular ng-model="property.propertyDesc"></text-angular>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.heatingType.$dirty && regPropertyForm.heatingType.$invalid }">
                                    <label class="control-label" for="heatingType">Heating Type</label>

                                    <div class="controls">
                                        <select name="heatingType" class="form-control input-lg" id="heatingType"
                                                ng-model="property.heatingType" ng-options="itemType.value as itemType.name for itemType in heatingTypes">
                                        </select>
                                        <p ng-show="regPropertyForm.heatingType.$error.required" class="help-block">Your heating type is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.doubleGlazing.$dirty && regPropertyForm.doubleGlazing.$invalid }">
                                    <label class="control-label" for="heatingType">Double Glazing</label>

                                    <div class="controls">
                                        <select name="doubleGlazing" class="form-control input-lg" id="doubleGlazing"
                                                ng-model="property.doubleGlazing" ng-options="itemType.value as itemType.name for itemType in doubleGlazingTypes">
                                        </select>
                                        <p ng-show="regPropertyForm.doubleGlazing.$error.required" class="help-block">Your double glazing is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.solidWoodFlooring.$dirty && regPropertyForm.solidWoodFlooring.$invalid }">
                                    <label class="control-label" for="solidWoodFlooring">Solid Wood Flooring</label>

                                    <div class="controls">
                                        <select name="solidWoodFlooring" class="form-control input-lg"
                                                id="solidWoodFlooring" ng-model="property.solidWoodFlooring"  ng-options="itemType.value as itemType.name for itemType in solidWoodFlooringTypes">
                                        </select>
                                        <p ng-show="regPropertyForm.solidWoodFlooring.$error.required" class="help-block">Your flooring type is required.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="well">
                        <h2>External Information</h2>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.parkingType.$dirty && regPropertyForm.parkingType.$invalid }">
                                    <label class="control-label" for="parkingType">Parking Type</label>

                                    <div class="controls">
                                        <select name="parkingType" class="form-control input-lg" id="parkingType"
                                                ng-model="property.parkingType" ng-options="itemType.value as itemType.name for itemType in parkingTypes">
                                        </select>
                                        <p ng-show="regPropertyForm.parkingType.$error.required" class="help-block">Your parking type is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.haveLand.$dirty && regPropertyForm.haveLand.$invalid }">
                                    <label class="control-label" for="haveLand">Land</label>

                                    <div class="controls">
                                        <select name="haveLand" class="form-control input-lg" id="haveLand"
                                                ng-model="property.haveLand">
                                        </select>
                                        <p ng-show="regPropertyForm.haveLand.$error.required" class="help-block">Your land is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group required"
                                     ng-class="{ 'has-error': regPropertyForm.haveGarden.$dirty && regPropertyForm.haveGarden.$invalid }">
                                    <label class="control-label" for="haveGarden">Garden</label>

                                    <div class="controls">
                                        <select name="haveGarden" class="form-control input-lg" id="haveGarden"
                                                ng-model="property.haveGarden"  ng-options="itemType.value as itemType.name for itemType in haveLandTypes">
                                        </select>
                                        <p ng-show="regPropertyForm.haveGarden.$error.required" class="help-block">Your garden is required.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--<div class="well" ng-show="false">-->
                        <h2>Google Location</h2>-->

                        <div class="row">

                        </div>
                    </div>
                    <!--<div class="well">-->
                        <h2>Add Directions</h2>-->

                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group required">
                                    <label class="control-label">Directions/Landmarks etc.</label>

                                    <div class="controls">
                                        <text-angular ng-model="property.propertyDirections"></text-angular>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group pull-right">
                        <input type="submit" value="Save" class="btn btn-default btn-lg">
                        {{enableSave}}
                    </div>
                    <div data-ng-show="error" class="text-danger">
                        <strong data-ng-bind="error"></strong>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
</section>
